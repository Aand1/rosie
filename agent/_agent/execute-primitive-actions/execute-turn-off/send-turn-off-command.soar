###############################################################################
#
# Inside the execute-turn-off1 substate, this will put a turn-off command on the output link
#
###############################################################################

sp {execute-turn-off1*propose*send-turn-off-command
   (state <s> ^name execute-turn-off1
             -^current-action.turn-off-command.status success
              ^target-object <obj>
              ^state-predicate <state-pred>)
-->
   (<s> ^operator <o> + >)
   (<o> ^name send-turn-off-command
        ^object <obj>
        ^state-predicate <state-pred>)
}

sp {execute-turn-off1*apply*send-turn-off-command
   (state <s> ^name execute-turn-off1
              ^operator <o>
              ^current-action <a>
              ^top-state.io.output-link <out>)
   (<o> ^name send-turn-off-command
        ^object.handle <obj-handle>
        ^state-predicate <state-pred>)
-->
   (<out> ^set-state <set>)
   (<set> ^object-handle <obj-handle>
          ^name <state-pred>
          ^value off)
   (<a> ^turn-off-command <set>)
}