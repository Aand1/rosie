sp {go-to-next-waypoint*elaborate*waypoint
   (state <s> ^name go-to-next-waypoint
              ^superstate.operator.next-waypoint <wp>)
-->
   (<s> ^waypoint <wp>)
}

sp {go-to-next-waypoint*elaborate*edge
   (state <s> ^name go-to-next-waypoint
              ^superstate.current-waypoint.edge <edge>
              ^waypoint <wp>)
   (<edge> ^end <wp>)
-->
   (<s> ^edge <edge>)
}

sp {go-to-next-waypoint*elaborate*wall-side
   (state <s> ^name go-to-next-waypoint
              ^edge.wall-side <side>)
-->
   (<s> ^wall-side <side>)
}

sp {go-to-next-waypoint*elaborate*wall-side*default
   (state <s> ^name go-to-next-waypoint
             -^edge.wall-side <side>)
-->
   (<s> ^wall-side 1)
}

sp {go-to-next-waypoint*elaborate*intermediate-turn
   (state <s> ^name go-to-next-waypoint
              ^edge.intermediate-turn <yaw>)
-->
   (<s> ^intermediate-turn <yaw>)
}

sp {go-to-next-waypoint*elaborate*intermediate-turn*default
   (state <s> ^name go-to-next-waypoint
             -^edge.intermediate-turn)
-->
   (<s> ^intermediate-turn none)
}

