#sp {anystate*elaborate*current-location*from*topstate
#   (state <s> ^name <> rosie
#              ^top-state.current-location <ca>)
#-->
#   (<s> ^current-location <ca>)
#}

sp {rosie*elaborate*next*waypoint
   (state <s> ^name rosie
              ^map.waypoints.waypoint <wp>)
   (<wp> ^edge.end <next-wp>)
-->
   (<wp> ^next <next-wp>)
}
