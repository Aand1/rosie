sp {rosie*elaborate*current-location*from*input-link
   (state <s> ^name rosie
              ^io.input-link.current-location <loc>
              ^map.
              ^areas.area <area>)
   (<area> ^id <loc>)
-->
   (<s> ^current-location <area>)
}

sp {anystate*elaborate*current-location*from*topstate
   (state <s> ^name <> rosie
              ^top-state.current-location <ca>)
-->
   (<s> ^current-location <ca>)
}

sp {rosie*elaborate*areas*neighbor-area
   (state <s> ^name rosie
              ^areas.area <a1>
              ^areas.area <a2>)
   (<a1> ^id <id1>
         ^gateway.to <id2>)
   (<a2> ^id <id2>)
-->
   (<a1> ^neighbor-area <a2>)
   (<a2> ^neighbor-area <a1>)
}
