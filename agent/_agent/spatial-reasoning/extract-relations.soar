#sp {spatial-reasoning*extract-relations*extract-filters*higher-than
#   (state <s> ^superstate nil
#              ^svs <svs>
#             -^topstate.stop-extracting-relations true)
#   (<svs> ^spatial-scene <sc>
#          ^command <cmd>)
#   (<sc> ^child <sc2>)
#   (<sc2> ^id <id> ^id-int <idi>)
#-->
#   (<cmd> ^extract <E4>)  
#   (<E4> ^type higher_than ^a <N7> ^b <belief-nodes> ^mark higher-than)   
#   (<N7> ^type node ^id <id>)
#   (<belief-nodes> ^type tag_select
#                   ^a.type all_nodes
#                   ^tag_name object-source
#                   ^tag_value belief)
#}

#sp {spatial-reasoning*elaborate*prepositions*higher-than
#   (state <s> ^superstate nil
#              ^prepositions <preps>)
#-->
#   (<preps> ^prep.name higher-than)
#}

sp {spatial-reasoning*extract-relations*extract-filters
   (state <s> ^superstate nil
              ^prepositions.prep.name <name>
              ^found-prep <fp>
              ^svs <svs>
             -^topstate.stop-extracting-relations true)
   (<svs> ^spatial-scene <sc>
          ^command <cmd>)
   (<sc> ^child <sc2>)
   (<sc2> ^id <id> ^id-int <idi>)
   (<fp> ^type <name> ^relation <r1> ^relation <r2> ^relation <r3>)
   (<r1> ^axis 0 ^type <x> ^bottom <bx> ^top <tx>)
   (<r2> ^axis 1 ^type <y> ^bottom <by> ^top <ty>)
   (<r3> ^axis 2 ^type <z> ^bottom <bz> ^top <tz>)
-->
   (<cmd> ^extract <xsel>)  
   (<xsel> ^type axis_distance_select ^axis x ^mark <name> 
           ^a <node> ^b <ysel> ^min <bx> ^max <tx>)
   (<ysel> ^type axis_distance_select ^axis y ^mark <name> 
           ^a <node> ^b <zsel> ^min <by> ^max <ty>)
   (<zsel> ^type axis_distance_select ^axis z ^mark <name> 
           ^a <node> ^b <belief-nodes> ^min <bz> ^max <tz>)
   (<belief-nodes> ^type tag_select
                   ^a.type all_nodes
                   ^tag_name object-source
                   ^tag_value belief)
   (<node> ^type node ^id <id>)
}


#sp {spatial-reasoning*extract-relations*extract-filters*linear
#   (state <s> ^superstate nil
#              ^prepositions.prep2.name {<name> << linear-with >>}
#              ^svs <svs>
#             -^topstate.stop-extracting-relations true)
#   (<svs> ^spatial-scene <sc>
#          ^command <cmd>)
#   (<sc> ^child <sc2>)
#   (<sc2> ^id <id> ^id-int <idi>)
#-->
#   (<cmd> ^extract <E1>)   
#   (<E1> ^a <N7> ^b <belief-nodes1> ^c <belief-nodes2> ^type <name> ^mark <name>)
#   (<N7> ^type node ^id <id>)
#   (<belief-nodes1> ^type tag_select
#                   ^a.type all_nodes
#                   ^tag_name object-source
#                   ^tag_value belief)
#   (<belief-nodes2> ^type tag_select
#                   ^a.type all_nodes
#                   ^tag_name object-source
#                   ^tag_value belief)
#}

sp {spatial-reasoning*extract-relations*extract-filters*smaller
   (state <s> ^superstate nil
              ^prepositions.prep2.name {<name> << smaller-than >>}
              ^svs <svs>
             -^topstate.stop-extracting-relations true)
   (<svs> ^spatial-scene <sc>
          ^command <cmd>)
   (<sc> ^child <sc2>)
   (<sc2> ^id <id> ^id-int <idi>)
-->
   (<cmd> ^extract <smaller>)   
   (<smaller> ^type smaller_select ^mark <name> ^volume_type scale
              ^a <node> ^b <belief-nodes>)
   (<belief-nodes> ^type tag_select
                   ^a.type all_nodes
                   ^tag_name object-source
                   ^tag_value belief)
   (<node> ^type node ^id <id>)
}

sp {spatial-reasoning*extract-relations*elaborate*pairs
   (state <s> ^superstate nil
              ^prepositions.prep <p>
              ^svs <svs>)
   (<svs> ^spatial-scene <sc>
          ^command <cmd>)
   (<sc> ^child <sc1> ^child <sc2>)
   (<sc1> ^id <id> ^id-int <idi>)
   (<sc2> ^id <id2> ^id-int <id2i>)
   (<cmd> ^extract <E11>)
   (<E11> ^a.id <id> ^result.record.value {<id2> <> <id>} ^mark <name>)
   (<p> ^name <name>)
-->
   (<p> ^pair <pa>)
   (<pa> ^a <id2i> ^b <idi>)
}

#sp {spatial-reasoning*extract-relations*elaborate*pairs*linear
#   (state <s> ^superstate nil
#              ^prepositions.prep2 <p>
#              ^svs <svs>)
#   (<svs> ^spatial-scene <sc>
#          ^command <cmd>)
#   (<sc> ^child <sc1> ^child <sc2> ^child <sc3>)
#   (<sc1> ^id <id> ^id-int <idi>)
#   (<sc2> ^id <id2> ^id-int <id2i>)
#   (<sc3> ^id <id3> ^id-int <id3i>)
#   (<cmd> ^extract <E11>)
#   (<E11> ^a.id {<id> <> <id3>} ^result.record <rec> ^mark <name>)
#   (<rec> ^value {<id2> <> <id>} ^params.c {<id3> <> <id2>})
#   (<p> ^name {<name> << linear-with >>})
#-->
#   (<p> ^pair <pa>)
#   (<pa> ^a <idi> ^b <id2i> ^c <id3i>)
#}

sp {spatial-reasoning*extract-relations*elaborate*pairs*smaller
   (state <s> ^superstate nil
              ^prepositions.prep2 <p>
              ^svs <svs>)
   (<svs> ^spatial-scene <sc>
          ^command <cmd>)
   (<sc> ^child <sc1> ^child <sc2>)
   (<sc1> ^id <id> ^id-int <idi>)
   (<sc2> ^id <id2> ^id-int <id2i>)
   (<cmd> ^extract <E11>)
   (<E11> ^a.id <id> ^result.record.value {<id2> <> <id>} ^mark <name>)
   (<p> ^name {<name> << smaller-than >>})
-->
   (<p> ^pair <pa>)
   (<pa> ^a <idi> ^b <id2i>)
}
