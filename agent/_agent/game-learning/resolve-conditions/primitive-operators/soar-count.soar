#rhs function rule workaround
#sp {soar-size*apply
#    (state <s1> ^gtype <gtype> ^list <l1> ^<gtype> <a1>)
#    (<l1> ^game <g1>)
#    (<a1> ^condition <c1>)
#    (<c1> ^result.set.pair <p2>)
#    (<p2> ^soar_size <thing>)
#-->
#   (<p2> ^1 (size <thing>))
#}

sp {soar-count*propose*complete
   (state <s> ^name soar-count
              ^pair <pair>)
-->
#   (interrupt)
   (<s> ^operator <o> + =)
   (<o> ^name complete
        ^pair <pair>)
}
sp {soar-count*apply*complete
   (state <s> ^name soar-count
              ^superstate.condition.result.set <res>
              ^operator <op>
              ^pair <s1>)  
   (<op> ^name complete ^pair <s1>)
#   (<s1> ^diff 1)
-->
  (<res> ^pair <s1>)
}

#sp {soar-count*elaborate*result
#   (state <s> ^name soar-count)
#-->
#   (<s> ^result.set <res>)
#}

sp {soar-count*elaborate*rhs*2params
   (state <s> ^name soar-count
              ^linkstate <ls>
             # ^superstate.condition.result.set <res>
              ^superstate.operator <o>)
   (<o> ^args <args> ^parameter.num 2 ^name soar-count)
   (<args> ^num 1 ^2 <a1>)
   (<a1> ^result <r> ^rtype set)
   (<r> ^set.pair.{1} <set>)
   -{(state <ls>)
     (<set> -^<something>)}
-->
#   (<s> ^count.set <set>)
   #(<res> ^pair <p>)
   (<s> ^pair <p>)
   (<p> ^2 <set> ^1 (size <set>))
  # (<p> ^2 <set> ^soar_size <set>)
}

sp {soar-count*elaborate*rhs*2params*single
   (state <s> ^name soar-count
              ^linkstate <ls>
              #^superstate.condition.result.set <res>
        #      ^result.set <res>
              ^superstate.operator <o>)
   (<o> ^args <args> ^parameter.num 2 ^name soar-count)
   (<args> ^num 1 ^2 <a1>)
   (<a1> ^result <r> ^rtype single)
   (<r> ^set <set>)
   -{(state <ls>)
     (<set> -^<something>)}
-->
#   (<s> ^count.set <set>)
   #(<res> ^pair <p>)
   (<s> ^pair <p>)
   (<p> ^2 <set> ^1 (size <set>))
   #(<p> ^2 <set> ^soar_size <set>)
}

sp {soar-count*elaborate*rhs*1param
   (state <s> ^name soar-count
              #^type set
              ^linkstate <ls>
            #  ^superstate.condition.result.set <res>
              ^superstate.operator <o>)
   (<o> ^args <args> ^parameter.num < 2 ^name soar-count)
   (<args> ^num 1 ^2 <a1>)
   (<a1> ^result <r> ^rtype set)
   (<r> ^set.pair.{1} <set>)
  -{(state <ls>)
    (<set> -^<something>)}
-->
 #  (<s> ^pair <pair>)
 #  (<pair> ^ (size <set>))
   #(<res> ^pair <p>)
   (<s> ^pair <p>)
   (<p> ^1 (size <set>))
   #(<res> ^pair.soar_size <set>)
}
sp {soar-count*elaborate*rhs*1param*signle
   (state <s> ^name soar-count
              ^linkstate <ls>
              #^superstate.condition.result.set <res>
              ^superstate.operator <o>)
   (<o> ^args <args> ^parameter.num < 2 ^name soar-count)
   (<args> ^num 1 ^2 <a1>)
   (<a1> ^result <r> ^rtype single)
   (<r> ^set <set>)
  -{(state <ls>)
    (<set> -^<something>)}
-->
   (<s> ^pair <pair>)
   (<pair> ^1 (size <set>))
   #(<res> ^pair.soar_size <set>)
}
