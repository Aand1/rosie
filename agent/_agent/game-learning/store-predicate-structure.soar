sp {store-predicate-structure*elaborate*attributes
   (state <s> ^name store-predicate-structure
              ^superstate.operator <o>)
   (<o> ^storing <t> ^handle <h> ^message <msg> ^type <y>)
-->
   (<s> ^storing <t> ^handle <h> ^message <msg> ^ptype <y>)
}

sp {store-predicate-structure*elaborate*multiplayer
   (state <s> ^name store-predicate-structure
              ^superstate.operator <o>)
   (<o> ^multiplayer <m>)
-->
   (<s> ^multiplayer <m>)
}


#only store at end
sp {store-predicate-structure*propose*complete
   (state <s> ^name store-predicate-structure)
-->
   (<s> ^operator <o> + =)
   (<o> ^name complete)
}

sp {store-predicate-structure*apply*complete
   (state <s> ^name store-predicate-structure
              ^operator.name complete
              ^top-state.interaction.status <status>
              ^top-state.interaction.changes <changes>)
-->
   (<changes> ^outgoing-message <msg>)
   (<msg> ^type simple-message
          ^message-type ok)
   (<status> ^performed.learning-event <de>)
   (<de> ^type game
         ^originator agent)
   
#  (<msg> ^fields <F31> ^type describe-goal-state)
#    (<F31> ^relationships <G10014>)
#      (<G10014> ^relation <R10800> ^relation <R10801>)
#        (<R10800> ^1 <D1029> ^2 <D1028> ^name on1)
#          (<D1029> ^size large1 ^type block)
#          (<D1028> ^color blue1 ^type location)
#        (<R10801> ^1 <D1028> ^2 <D1029> ^name below1)
}


#TODO REMOVE?
sp {store-predicate-structure*apply*complete*remove-learn-link
   (state <s> ^name store-predicate-structure
              ^operator.name complete
             -^message.predicate <ll>
              ^top-state <ts>)
   (<s> ^storing name)
   (<ts> ^dialog-context <dc>)
   (<dc> ^learn-link <ll>)
-->
   (<dc> ^learn-link <ll> -)
}

#JK TODO hack
sp {store-predicate-structure*elaborate*top-state*dialogue-context*gamed
   (state <s> ^name store-predicate-structuredd
              ^operator.name complete
              ^top-state <ts>)
   (<s> ^storing name ^ptype game ^handle <handle> ^message.predicate <pred>)
-->
   (<ts> ^dialog-context <dc>)
   (<dc> ^attend <A10107> ^final <R10792> ^finished-demo true
       ^goal-relationships <G10015> ^goal-state <R11128> ^ignore <I164>
       ^initial <R10601> ^learning true ^name tower-of-hanoi1 ^structure <R10204>
       ^type game-learning)
  (<A10107> ^object <O8029> ^object <O8027> ^object <O8028>)
    (<O8029> ^handle medium-green1 ^item-type object ^predicates <P90133>)
      (<P90133> ^arm-status not-grabbed ^category block ^movable true
             ^size medium1 ^visible true)
    (<O8027> ^handle large-orange1 ^item-type object ^predicates <P90131>)
      (<P90131> ^arm-status not-grabbed ^category block ^movable true
             ^size large1 ^visible true)
    (<O8028> ^handle small-red1 ^item-type object ^predicates <P90132>)
      (<P90132> ^arm-status not-grabbed ^category block ^movable true
             ^size <small1> ^visible true)
  (<R10792> ^objects <O14033> ^predicate-set <P90247> ^relationships <R10773>)
    (<O14033> ^done true ^object <O8027> ^object <O8029> ^object <O8028> ^object <L27>
           ^object <L25> ^object <L26>)
      (<L27> ^handle b3 ^item-type object ^predicates <P90129>)
        (<P90129> ^arm-status not-grabbed ^category location ^color blue1
               ^visible true)
      (<L25> ^handle b1 ^item-type object ^predicates <P90127>)
        (<P90127> ^arm-status not-grabbed ^category location ^color green1
               ^visible true)
      (<L26> ^handle b2 ^item-type object ^predicates <P90128>)
        (<P90128> ^arm-status not-grabbed ^category location ^color red1
               ^visible true)
    (<P90247> ^done true ^predicate <P90248> ^predicate <P90249> ^predicate <P90250>
           ^predicate <P90251> ^predicate <P90252> ^predicate <P90253>)
      (<P90248> ^name size ^object <O8027> ^value large1)
      (<P90249> ^name size ^object <O8029> ^value medium1)
      (<P90250> ^name size ^object <O8028> ^value small1)
      (<P90251> ^name color ^object <L27> ^value blue1)
      (<P90252> ^name color ^object <L25> ^value green1)
      (<P90253> ^name color ^object <L26> ^value red1)
    (<R10773> ^done true ^relations <R10774> ^relations <R10775> ^relations <R10776>
           ^relations <R10777> ^relations <R10778> ^relations <R10779>
           ^relations <R10780> ^relations <R10781> ^relations <R10782>
           ^relations <R10783> ^relations <R10784> ^relations <R10785>
           ^relations <R10786> ^relations <R10787> ^relations <R10788>
           ^relations <R10789> ^relations <R10790> ^relations <R10791>)
      (<R10774> ^instance <I165> ^name on1)
        (<I165> ^1 <O8029> ^2 <O8027>)
      (<R10775> ^instance <I166> ^name on1)
        (<I166> ^1 <O8028> ^2 <O8029>)
      (<R10776> ^instance <I167> ^name on1)
        (<I167> ^1 <O8027> ^2 <L27>)
      (<R10777> ^instance <I168> ^name below1)
        (<I168> ^1 <O8027> ^2 <O8029>)
      (<R10778> ^instance <I169> ^name below1)
        (<I169> ^1 <O8029> ^2 <O8028>)
      (<R10779> ^instance <I170> ^name below1)
        (<I170> ^1 <L27> ^2 <O8027>)
      (<R10780> ^instance <I171> ^name larger-than1)
        (<I171> ^1 <O8027> ^2 <O8028>)
      (<R10781> ^instance <I172> ^name larger-than1)
        (<I172> ^1 <O8029> ^2 <O8028>)
      (<R10782> ^instance <I173> ^name larger-than1)
        (<I173> ^1 <L25> ^2 <O8028>)
      (<R10783> ^instance <I174> ^name larger-than1)
        (<I174> ^1 <L26> ^2 <O8028>)
      (<R10784> ^instance <I175> ^name larger-than1)
        (<I175> ^1 <L27> ^2 <O8028>)
      (<R10785> ^instance <I176> ^name larger-than1)
        (<I176> ^1 <O8027> ^2 <O8029>)
      (<R10786> ^instance <I177> ^name larger-than1)
        (<I177> ^1 <L25> ^2 <O8029>)
      (<R10787> ^instance <I178> ^name larger-than1)
        (<I178> ^1 <L26> ^2 <O8029>)
      (<R10788> ^instance <I179> ^name larger-than1)
        (<I179> ^1 <L27> ^2 <O8029>)
      (<R10789> ^instance <I180> ^name larger-than1)
        (<I180> ^1 <L25> ^2 <O8027>)
      (<R10790> ^instance <I181> ^name larger-than1)
        (<I181> ^1 <L26> ^2 <O8027>)
      (<R10791> ^instance <I182> ^name larger-than1)
        (<I182> ^1 <L27> ^2 <O8027>)
  (<G10015> ^relation <R11129> ^relation <R11130> ^relation <R11131> ^relation <R11132>
         ^relation <R11133> ^relation <R11134>)
    (<R11129> ^1 <D1040> ^2 <D1038> ^name on1)
      (<D1040> ^size large1 ^type block)
      (<D1038> ^color blue1 ^type location)
    (<R11130> ^1 <D1038> ^2 <D1040> ^name below1)
    (<R11131> ^1 <D1041> ^2 <D1040> ^name on1)
      (<D1041> ^size medium1 ^type block)
    (<R11132> ^1 <D1039> ^2 <D1041> ^name on1)
      (<D1039> ^size small1 ^type block)
    (<R11133> ^1 <D1040> ^2 <D1041> ^name below1)
    (<R11134> ^1 <D1041> ^2 <D1039> ^name below1)
  (<R11128> ^objects <O18430> ^predicates <P90302> ^relationships <R11126>)
    (<O18430> ^object <O8029> ^object <O8027> ^object <O8028> ^object <L27>)
    (<P90302> ^<L27> <D1038> ^<O8027> <D1040> ^<O8028> <D1039> ^<O8029> <D1041>
           ^predicate <N10265> ^predicate <N10266> ^predicate <N10267>
           ^predicate <N10268>)
      (<N10265> ^name size ^object <O8027> ^value large1)
      (<N10266> ^name size ^object <O8029> ^value medium1)
      (<N10267> ^name size ^object <O8028> ^value small1)
      (<N10268> ^name color ^object <L27> ^value blue1)
    (<R11126> ^relations <N10261> ^relations <N10262> ^relations <N10263>
           ^relations <N10264> ^relations <N10259> ^relations <N10260>)
      (<N10261> ^instance <I165> ^name on1)
      (<N10262> ^instance <I166> ^name on1)
      (<N10263> ^instance <I168> ^name below1)
      (<N10264> ^instance <I169> ^name below1)
      (<N10259> ^instance <I167> ^name on1)
      (<N10260> ^instance <I170> ^name below1)
  (<I164> ^relation larger-than1)
  (<R10601> ^objects <O12912> ^predicate-set <P90209> ^relationships <R10582>)
    (<O12912> ^done true ^object <O8027> ^object <O8029> ^object <L25> ^object <O8028>
           ^object <L26> ^object <L27>)
    (<P90209> ^done true ^predicate <P90210> ^predicate <P90211> ^predicate <P90212>
           ^predicate <P90213> ^predicate <P90214> ^predicate <P90215>)
      (<P90210> ^name size ^object <O8027> ^value large1)
      (<P90211> ^name size ^object <O8029> ^value medium1)
      (<P90212> ^name color ^object <L25> ^value green1)
      (<P90213> ^name size ^object <O8028> ^value small1)
      (<P90214> ^name color ^object <L26> ^value red1)
      (<P90215> ^name color ^object <L27> ^value blue1)
    (<R10582> ^done true ^relations <R10583> ^relations <R10584> ^relations <R10585>
           ^relations <R10586> ^relations <R10587> ^relations <R10588>
           ^relations <R10589> ^relations <R10590> ^relations <R10591>
           ^relations <R10592> ^relations <R10593> ^relations <R10594>
           ^relations <R10595> ^relations <R10596> ^relations <R10597>
           ^relations <R10598> ^relations <R10599> ^relations <R10600>)
      (<R10583> ^instance <I134> ^name on1)
        (<I134> ^1 <O8029> ^2 <O8027>)
      (<R10584> ^instance <I135> ^name on1)
        (<I135> ^1 <O8027> ^2 <L25>)
      (<R10585> ^instance <I136> ^name on1)
        (<I136> ^1 <O8028> ^2 <O8029>)
      (<R10586> ^instance <I137> ^name below1)
        (<I137> ^1 <O8027> ^2 <O8029>)
      (<R10587> ^instance <I138> ^name below1)
        (<I138> ^1 <L25> ^2 <O8027>)
      (<R10588> ^instance <I139> ^name below1)
        (<I139> ^1 <O8029> ^2 <O8028>)
      (<R10589> ^instance <I140> ^name larger-than1)
        (<I140> ^1 <O8027> ^2 <O8028>)
      (<R10590> ^instance <I141> ^name larger-than1)
        (<I141> ^1 <O8029> ^2 <O8028>)
      (<R10591> ^instance <I142> ^name larger-than1)
        (<I142> ^1 <L25> ^2 <O8028>)
      (<R10592> ^instance <I143> ^name larger-than1)
        (<I143> ^1 <L26> ^2 <O8028>)
      (<R10593> ^instance <I144> ^name larger-than1)
        (<I144> ^1 <L27> ^2 <O8028>)
      (<R10594> ^instance <I145> ^name larger-than1)
        (<I145> ^1 <O8027> ^2 <O8029>)
      (<R10595> ^instance <I146> ^name larger-than1)
        (<I146> ^1 <L25> ^2 <O8029>)
      (<R10596> ^instance <I147> ^name larger-than1)
        (<I147> ^1 <L26> ^2 <O8029>)
      (<R10597> ^instance <I148> ^name larger-than1)
        (<I148> ^1 <L27> ^2 <O8029>)
      (<R10598> ^instance <I149> ^name larger-than1)
        (<I149> ^1 <L25> ^2 <O8027>)
      (<R10599> ^instance <I150> ^name larger-than1)
        (<I150> ^1 <L26> ^2 <O8027>)
      (<R10600> ^instance <I151> ^name larger-than1)
        (<I151> ^1 <L27> ^2 <O8027>)
  (<R10204> ^actions <A10106> ^goals <G10013> ^handle tower-of-hanoi1
         ^heuristics <H13> ^item-type predicate ^word-structure <N10068>)
    (<A10106> ^action <R11327>)
      (<R11327> ^handle stack-block3 ^item-type predicate ^aname stack-block3 
             ^predicate-structure <P90381> ^primary-rtype single ^type action ^argnum 2
             ^verb-structure <V64> ^word-structure <N10338>)
      (<V64> ^verb-name move1 ^verb-prep on1 ^1 1 ^2 2 )#why wasn't here
        (<P90381> ^conditions <N10450> ^aname stack-block3)
          (<N10450> ^args <A10144> ^attribute prepositions ^name larger-than1
                 ^negative false ^parameter <P90457> ^result <R11629>
                 ^rtype single ^type state-pair)
            (<A10144> ^1 <C2170> ^2 <C2164> ^num 2)
              (<C2170> ^args <A10143> ^attribute predicate ^name clear
                     ^negative false ^parameter <P90455> ^result <R11631>
                     ^rtype single ^type concept)
                (<A10143> ^1 <C2169> ^num 1)
                  (<C2169> ^args <A10146> ^attribute primitive ^name object
                         ^negative false ^parameter <P90454> ^result <R11632>
                         ^rtype single ^type attribute)
                    (<P90454> ^num 0)
                    (<R11632> ^set <P90464>)
                      (<P90464> ^instance <I272> ^instance <I273> ^instance <I274>
                             ^instance <I275> ^instance <I276> ^instance <I277>)
                        (<I272> ^1 <N10422>)
                          (<N10422> ^handle large-orange1 ^item-type object
                                 ^predicates <P90445>)
                            (<P90445> ^arm-status not-grabbed ^category block
                                   ^movable true ^size large1 ^visible true)
                        (<I273> ^1 <N10423>)
                        (<I274> ^1 <N10424>)
                          (<N10424> ^handle medium-green1 ^item-type object
                                 ^predicates <P90447>)
                            (<P90447> ^arm-status not-grabbed ^category block
                                   ^movable true ^size medium1 ^visible true)
                        (<I275> ^1 <N10425>)
                        (<I276> ^1 <N10426>)
                        (<I277> ^1 <N10427>)
                          (<N10427> ^handle b3 ^item-type object
                                 ^predicates <P90450>)
                            (<P90450> ^arm-status not-grabbed ^category location
                                   ^color blue1 ^visible true)
                (<P90455> ^1 <P90456> ^num 1)
                  (<P90456> ^param-id 2 ^type single)
                (<R11631> ^set <P90463>)
                  (<P90463> ^instance <I301> ^instance <I300> ^instance <I299>)
                    (<I301> ^1 <N10423>)
                    (<I300> ^1 <N10425>)
                    (<I299> ^1 <N10426>)
              (<C2164> ^args <A10142> ^attribute predicate ^name clear
                     ^negative false ^parameter <P90452> ^result <R11630>
                     ^rtype single ^type concept)
                (<A10142> ^1 <C2163> ^num 1)
                  (<C2163> ^args <A10147> ^attribute category ^name block
                         ^negative false ^parameter <P90451> ^result <R11633>
                         ^rtype single ^type attribute)
                    (<A10147> ^1 <C2169> ^num 1)
                    (<P90451> ^num 0)
                    (<R11633> ^set <P90465>)
                      (<P90465> ^instance <I278> ^instance <I279> ^instance <I280>)
                        (<I278> ^1 <N10422>)
                        (<I279> ^1 <N10423>)
                        (<I280> ^1 <N10424>)
                (<P90452> ^1 <P90453> ^num 1)
                  (<P90453> ^param-id 1 ^type single)
                (<R11630> ^set <P90462>)
                  (<P90462> ^instance <I302>)
                    (<I302> ^1 <N10423>)
            (<P90457> ^1 <P90458> ^2 <P90459> ^num 2)
              (<P90458> ^param-id 2 ^type single)
              (<P90459> ^param-id 1 ^type single)
            (<R11629> ^set <P90461>)
              (<P90461> ^instance <I303> ^instance <I304>)
                (<I303> ^1 <N10425> ^2 <N10423>)
                  (<N10425> ^handle b1 ^item-type object ^predicates <P90448>)
                    (<P90448> ^arm-status not-grabbed ^category location
                           ^color green1 ^visible true)
                  (<N10423> ^handle small-red1 ^item-type object
                         ^predicates <P90446>)
                    (<P90446> ^arm-status not-grabbed ^category block
                           ^movable true ^size small1 ^visible true)
                (<I304> ^1 <N10426> ^2 <N10423>)
                  (<N10426> ^handle b2 ^item-type object ^predicates <P90449>)
                    (<P90449> ^arm-status not-grabbed ^category location
                           ^color red1 ^visible true)
       # (<N10338> ^referent <R11327> ^spelling stack-block)
    (<G10013> ^goal <R10367>)
      (<R10367> ^handle all-stacked2 ^item-type predicate ^aname all-stacked2
             ^predicate-structure <P90177> ^primary-rtype single ^type goal ^argnum 4
             ^word-structure <N10115>)
        (<P90177> ^conditions <C1503> ^conditions <C1504> ^conditions <C1505> ^aname all-stacked2
               ^conditions <C1506> ^conditions <C1507> ^conditions <C1508>)
          (<C1503> ^args <A10121> ^attribute prepositions ^name on1
                 ^negative false ^parameter <P90311> ^result <R11150>
                 ^rtype single ^type state-pair)
            (<A10121> ^1 <C1499> ^2 <C1500> ^num 2)
              (<C1499> ^args <A10117> ^attribute size ^name small1 ^negative false
                     ^parameter <P90345> ^result <R11159> ^rtype single
                     ^type attribute)
                (<A10117> ^1 <C1497> ^num 1)
                  (<C1497> ^args <A10129> ^attribute category ^name block
                         ^negative false ^parameter <P90346> ^result <R11160>
                         ^rtype single ^type attribute)
                    (<A10129> ^1 <C1518> ^num 1)
                      (<C1518> ^args <A10131> ^attribute primitive ^name object
                             ^negative false ^parameter <P90341> ^result <R11148>
                             ^rtype single ^type attribute)
                        (<P90341> ^num 0)
                        (<R11148> ^set <R11149>)
                          (<R11149> ^instance <I218> ^instance <I219> ^instance <I220>
                                 ^instance <I221> ^instance <I222> ^instance <I217>)
                            (<I218> ^1 <N10272>)
                            (<I219> ^1 <N10273>)
                            (<I220> ^1 <N10274>)
                            (<I221> ^1 <N10275>)
                            (<I222> ^1 <N10276>)
                            (<I217> ^1 <N10277>)
                    (<P90346> ^num 0)
                    (<R11160> ^set <P90358>)
                      (<P90358> ^instance <I228> ^instance <I229> ^instance <I230>)
                        (<I228> ^1 <N10274>)
                        (<I229> ^1 <N10273>)
                        (<I230> ^1 <N10272>)
                (<P90345> ^num 0)
                (<R11159> ^set <P90357>)
                  (<P90357> ^instance <I233>)
                    (<I233> ^1 <N10273>)
              (<C1500> ^args <A10118> ^attribute size ^name medium1
                     ^negative false ^parameter <P90344> ^result <R11158>
                     ^rtype single ^type attribute)
                (<A10118> ^1 <C1497> ^num 1)
                (<P90344> ^num 0)
                (<R11158> ^set <P90356>)
                  (<P90356> ^instance <I232>)
                    (<I232> ^1 <N10274>)
            (<P90311> ^1 <P90312> ^2 <P90313> ^num 2)
              (<P90312> ^param-id 2 ^type single)
              (<P90313> ^param-id 3 ^type single)
            (<R11150> ^set <P90348>)
              (<P90348> ^instance <I240>)
                (<I240> ^1 <N10273> ^2 <N10274>)
                  (<N10273> ^handle small-<red1> ^item-type object
                         ^predicates <P90335>)
                    (<P90335> ^arm-status not-grabbed ^category block
                           ^movable true ^size <small1> ^visible true)
                  (<N10274> ^handle medium-<green1> ^item-type object
                         ^predicates <P90336>)
                    (<P90336> ^arm-status not-grabbed ^category block
                           ^movable true ^size medium1 ^visible true)
          (<C1504> ^args <A10122> ^attribute prepositions ^name below1
                 ^negative false ^parameter <P90314> ^result <R11151>
                 ^rtype single ^type state-pair)
            (<A10122> ^1 <C1500> ^2 <C1499> ^num 2)
            (<P90314> ^1 <P90315> ^2 <P90316> ^num 2)
              (<P90315> ^param-id 3 ^type single)
              (<P90316> ^param-id 2 ^type single)
            (<R11151> ^set <P90349>)
              (<P90349> ^instance <I239>)
                (<I239> ^1 <N10274> ^2 <N10273>)
          (<C1505> ^args <A10123> ^attribute prepositions ^name on1
                 ^negative false ^parameter <P90317> ^result <R11152>
                 ^rtype single ^type state-pair)
            (<A10123> ^1 <C1500> ^2 <C1501> ^num 2)
              (<C1501> ^args <A10119> ^attribute size ^name large1 ^negative false
                     ^parameter <P90342> ^result <R11156> ^rtype single
                     ^type attribute)
                (<A10119> ^1 <C1497> ^num 1)
                (<P90342> ^num 0)
                (<R11156> ^set <P90354>)
                  (<P90354> ^instance <I234>)
                    (<I234> ^1 <N10272>)
            (<P90317> ^1 <P90318> ^2 <P90319> ^num 2)
              (<P90318> ^param-id 3 ^type single)
              (<P90319> ^param-id 4 ^type single)
            (<R11152> ^set <P90350>)
              (<P90350> ^instance <I238>)
                (<I238> ^1 <N10274> ^2 <N10272>)
                  (<N10272> ^handle large-orange1 ^item-type object
                         ^predicates <P90334>)
                    (<P90334> ^arm-status not-grabbed ^category block
                           ^movable true ^size large1 ^visible true)
          (<C1506> ^args <A10124> ^attribute prepositions ^name below1
                 ^negative false ^parameter <P90320> ^result <R11153>
                 ^rtype single ^type state-pair)
            (<A10124> ^1 <C1501> ^2 <C1500> ^num 2)
            (<P90320> ^1 <P90321> ^2 <P90322> ^num 2)
              (<P90321> ^param-id 4 ^type single)
              (<P90322> ^param-id 3 ^type single)
            (<R11153> ^set <P90351>)
              (<P90351> ^instance <I237>)
                (<I237> ^1 <N10272> ^2 <N10274>)
          (<C1507> ^args <A10125> ^attribute prepositions ^name on1
                 ^negative false ^parameter <P90323> ^result <R11154>
                 ^rtype single ^type state-pair)
            (<A10125> ^1 <C1501> ^2 <C1502> ^num 2)
              (<C1502> ^args <A10120> ^attribute color ^name blue1 ^negative false
                     ^parameter <P90343> ^result <R11157> ^rtype single
                     ^type attribute)
                (<A10120> ^1 <C1496> ^num 1)
                  (<C1496> ^args <A10130> ^attribute category ^name location
                         ^negative false ^parameter <P90347> ^result <R11161>
                         ^rtype single ^type attribute)
                    (<A10130> ^1 <C1518> ^num 1)
                    (<P90347> ^num 0)
                    (<R11161> ^set <P90359>)
                      (<P90359> ^instance <I226> ^instance <I227> ^instance <I224>)
                        (<I226> ^1 <N10277>)
                        (<I227> ^1 <N10276>)
                          (<N10276> ^handle b2 ^item-type object
                                 ^predicates <P90338>)
                            (<P90338> ^arm-status not-grabbed ^category location
                                   ^color red1 ^visible true)
                        (<I224> ^1 <N10275>)
                          (<N10275> ^handle b1 ^item-type object
                                 ^predicates <P90337>)
                            (<P90337> ^arm-status not-grabbed ^category location
                                   ^color green1 ^visible true)
                (<P90343> ^num 0)
                (<R11157> ^set <P90355>)
                  (<P90355> ^instance <I231>)
                    (<I231> ^1 <N10277>)
            (<P90323> ^1 <P90324> ^2 <P90325> ^num 2)
              (<P90324> ^param-id 4 ^type single)
              (<P90325> ^param-id 1 ^type single)
            (<R11154> ^set <P90352>)
              (<P90352> ^instance <I236>)
                (<I236> ^1 <N10272> ^2 <N10277>)
                  (<N10277> ^handle b3 ^item-type object ^predicates <P90339>)
                    (<P90339> ^arm-status not-grabbed ^category location
                           ^color blue1 ^visible true)
          (<C1508> ^args <A10126> ^attribute prepositions ^name below1
                 ^negative false ^parameter <P90326> ^result <R11155>
                 ^rtype single ^type state-pair)
            (<A10126> ^1 <C1502> ^2 <C1501> ^num 2)
            (<P90326> ^1 <P90327> ^2 <P90328> ^num 2)
              (<P90327> ^param-id 1 ^type single)
              (<P90328> ^param-id 4 ^type single)
            (<R11155> ^set <P90353>)
              (<P90353> ^instance <I235>)
                (<I235> ^1 <N10277> ^2 <N10272>)
       # (<N10115> ^referent <R10367> ^spelling all-stacked)
    #(<N10068> ^referent <R10204> ^spelling tower-of-hanoi)

}

sp {store-predicate-structure*elaborate*top-state*dialogue-context*gamefe
   (state <s> ^name store-predicate-structure
              ^operator.name complete
              ^top-state <ts>)
   (<s> ^storing name ^ptype game ^handle <handle> ^message.predicate <pred>)
-->
   (<ts> ^dialog-context <dc>)
   (<dc> ^type game-learning ^name <handle> ^structure <pred> ^learning true)
   (<pred> ^actions <act> ^goals <go> ^heuristics <heu>)
   #test learning predicates
#   (<dc> ^learning-predicate <lp>)
#   (<lp> ^name adjacent)
}

sp {store-predicate-structure*elaborate*top-state*dialogue-context*goal
   (state <s> ^name store-predicate-structure
              ^operator.name complete
              ^top-state <ts>)
   (<s> ^storing name ^ptype goal ^handle <handle> ^message.predicate <pred2>)
   (<ts> ^dialog-context <dc>)
   (<dc> ^structure <pred>)
   (<pred> ^goals <go>)
-->
   (<go> ^goal <pred2>)
   (<pred2> ^predicate-structure <ps> ^type goal)
   (<dc> ^learn-link <pred2>)
}

sp {store-predicate-structure*elaborate*top-state*dialogue-context*action
   (state <s> ^name store-predicate-structure
              ^operator.name complete
              ^top-state <ts>)
   (<s> ^storing name ^ptype action ^handle <handle> ^message.predicate <pred2>)
   (<ts> ^dialog-context <dc>)
   (<dc> ^structure <pred>)
   (<pred> ^actions <act>)
-->
   (<act> ^action <pred2>)
   (<pred2> ^predicate-structure <ps> ^type action)
   (<dc> ^learn-link <pred2>)
}

sp {store-predicate-structure*elaborate*top-state*dialogue-context*multiplayer
   (state <s> ^name store-predicate-structure
              ^operator.name complete
              ^top-state <ts>)
   (<s> ^multiplayer <mult>)
   (<ts> ^dialog-context <dc>)
   (<dc> ^structure <pred>)
-->
   (<pred> ^multiplayer <mult>)
}



#sp {store-predicate-structure*elaborate*smem-retrieve
#   (state <s> ^name store-predicate-structure
#              ^predicate-lti <lti>)
#-->
#   (<s> ^smem-concept <lti>)
#}