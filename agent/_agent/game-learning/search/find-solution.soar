#sp {find-solution*propose*game-search*elab-depth-limit
#   (state <s> ^name find-solution
#              -^superstate.operator.game-name frog-toad
#              -^superstate.operator.game-name tower-chunk)
#-->
#   (<s> ^depth-limit 1)
#}

sp {find-solution*elaborate*problem-space*world
(state <s> ^name find-solution
            ^top-state.world <world2>)
-->
   (<s> ^problem-space.world <world>)
   (<world> ^source <world2>
            ^copy-type shallow)
}


sp {find-solution*propose*game-search*elab-depth-limit*tower
   (state <s> ^name find-solution
   	      ^superstate.operator.game-name tower-of-hanoi1)
-->
   (<s> ^depth-limit 7)
}

sp {find-solution*propose*game-search*elab-depth-limit*frog
   (state <s> ^name find-solution
   	      ^superstate.operator.game-name frog-toad)
-->
   (<s> ^depth-limit 8)
}
              

sp {find-solution*propose*game-search
   (state <s> ^name find-solution
              ^superstate.multiplayer false
              ^depth-limit <dl>
             -^found-action
              ^superstate.operator <op>)
   (<op> ^game-name <name>)
-->
   (<s> ^operator <o> + =)
   (<o> ^name game-search
        ^dcount 0
        ^depth-limit <dl> #todo fix
        ^list.game <g>
        ^current <g> 
        ^game <name>)
   (<g> ^game <name> ^type action goal)
}
sp {find-solution*elaborate*found-true
   (state <s> ^name find-solution
              ^top-state.flound-action.dcount 6
              ^top-state.flound-action.dcount 0)
-->
    (<s> ^found-action true)
}

sp {find-solution*propose*game-search*muliplayer
   (state <s> ^name find-solution
              -^found-action
              ^superstate.multiplayer true
              ^superstate.operator <op>)
   (<op> ^game-name <name>)
-->
   (<s> ^operator <o> + =)
   (<o> ^name game-search
        ^dcount 0
        ^depth-limit 1
        ^list.game <g>
        ^current <g> 
        ^game <name>)
   (<g> ^game <name> ^type action goal)
}

sp {find-solution*mark*found-action
   (state <s> ^superstate nil
              ^operator.name execute-put-down1
              ^flound-action <fa>)
   (<fa> ^started -^mark)
-->
    (<fa> ^mark done)
}


sp {find-solution*propose*execute-action
   (state <s> ^name find-solution
              ^top-state <ts>
              ^world.objects <objs>
              ^found-action)
   (<ts> ^flound-action <fa>)
   #(<p> ^handle <pname>)
   (<fa> ^obj1 <oa> ^obj2 <ob> ^dcount <dc> -^mark ^pname <pname>)
  -{(<ts> ^flound-action <fa2>)
    (<fa2> -^mark ^dcount < <dc>)}
(<oa> ^handle <id1>)
(<ob> ^handle <id2>)
(<objs> ^object <obj1> ^object <obj2>)
(<obj1> ^handle <id1>)
(<obj2> ^handle <id2>)
-->
  (<s> ^operator <o> +)
  (<o> ^name execute-action
       ^action-ref <fa>
       ^dcount <dc>
       ^action-operator <op>)
 (<op> ^name op_move1 ^action-handle move1 ^action-type composite ^arg1 <arg1> ^arg2 <arg2>)
 (<arg1> ^arg-type object ^id <obj1>)
 (<arg2> ^2 <obj2> ^arg-type predicate ^handle <pname>)
}

sp {find-solution*apply*execute-action
   (state <s> ^name find-solution
              ^operator <o>)
   (<o> ^name execute-action
       ^action-ref <fa>)
-->
    (<fa> ^started true)
}


sp {find-solution*elabroate*attend-to-arm 
   (state <s> ^name  find-solution
              ^found-action
              ^robot-state.arm.grabbed)
-->
   (<s> ^attend-to-arm true)
}

#uncomment
sp {find-solution*propose*completed-all-actions
   (state <s> ^name find-solution
              ^top-state <ts>
              ^top-state.flound-action <fa>)
   (<fa> ^obj1 <oa> ^obj2 <ob> ^dcount <dc> ^mark)
  -{(<ts> ^flound-action <fa2>)
    (<fa2> -^mark)}          
-->
   (<s> ^operator <o> + < =)
   (<o> ^name completed-all-actions)
}


sp {find-solution*apply*completed-all-actions*remove*found-action
   (state <s> ^name find-solution
              ^operator <o>
              ^top-state <ts>)
   (<o> ^name completed-all-actions)
   (<ts> ^flound-action <fa>)
-->
   (<ts> ^flound-action <fa> -)
}
sp {find-solution*apply*completed-all-actions*remove*dialog-context
   (state <s> ^name find-solution
              ^operator <o>
              ^top-state <ts>)
   (<o> ^name completed-all-actions)
   (<ts> ^dialog-context <dc>)
-->
   (<ts> ^dialog-context <dc> -)
}

sp {find-solution*apply*completed-all-actions*send-message
   (state <s> ^name find-solution
              ^operator <o>
              ^top-state.interaction.status <status>
              ^top-state.interaction.changes <changes>)
   (<o> ^name completed-all-actions)
-->
   (<changes> ^outgoing-message <msg>)
   (<msg> ^type simple-message
          ^message-type easy)
   (<status> ^performed.learning-event <de>)
   (<de> ^type game
         ^originator agent)
 }



