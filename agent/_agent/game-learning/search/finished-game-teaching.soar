
#TODO need?
#sp {finished-game-teaching*remove-learning-true
#   :o-support
#   (state <s> ^name finished-game-teaching
#              ^top-state.dialog-context <dc>)
#   (<dc> ^learning <t>)
#-->
#   (<dc> ^learning <t> -)
#}

#if not in dialog context retrieve here


sp {finished-game-teaching*propose*setup-search
   (state <s> ^name finished-game-teaching
              ^superstate.operator.type game
              ^top-state.dialog-context.structure.handle <name>)
-->
   (<s> ^operator <o> + =)
   (<o> ^name setup-search
        ^game-name <name>)
}

sp {finished-game-teaching*propose*setup-search*yes
   (state <s> ^name finished-game-teaching
             #-^top-state.dialog-context.structure.multiplayer true #JAMES UNDO
              ^superstate.operator.response yes
              ^top-state.dialog-context.structure.handle <name>)
-->
   (<s> ^operator <o> + =)
   (<o> ^name setup-search
        ^game-name <name>)
}
#### JAMES UNDO!!!!! for chunking test
#sp {finished-game-teaching*propose*prepare-game*yes
#   (state <s> ^name finished-game-teaching
#             ^top-state.dialog-context.structure.multiplayer true
#              ^superstate.operator.response yes
#              ^top-state.dialog-context.structure.handle <name>)
#-->
#   (<s> ^operator <o> + =)
#   (<o> ^name prepare-game)
#}
##JAMES UNDO!!!!
#sp {finished-game-teaching*apply*clean-up-after-learning*recorddata
#   (state <s> ^name finished-game-teaching
#              ^top-state <ts>
#              ^operator <o>)
#   (<o> ^name clean-up-after-learning)
#-->
#    (<ts> ^capture-data yes)
#}


sp {finished-game-teaching*propose*clean-up-after-learning*no
   (state <s> ^name finished-game-teaching
              ^superstate.operator.response no
              ^top-state.dialog-context.structure.handle <name>)
-->
   (<s> ^operator <o> + =)
   (<o> ^name clean-up-after-learning
        ^game-name <name>)
}

#sp {super-mem-test-rule-deep
#   (state <s> ^superstate.superstate.superstate.superstate.superstate.superstate.superstate <ts>)
#-->
#    (interrupt)
#    (write (cmd |stats -dc|))
#    (write (cmd |mem 3|))
#    }

sp {apply*clean-up-after-learning*capture-data
   (state <s> ^superstate nil
              ^capture-data <ys>
              ^operator.name interaction)
-->
 #   (interrupt)
    (<s> ^capture-data <ys> -)
 #need per task teach #ignoring solve for now
(write (cmd |ctf -a statsdc.txt stats -dc|))
(write (cmd |ctf -a smemuse.txt smem --stats mem-usage|))
#(write (cmd |ctf -a topstate10.txt print -d 10 s1|))
(write (cmd |ctf -a pertaskstats.txt stats|)) #has cpu time, WM size, number of chunks
}

sp {apply*startparsingtime*capture-data
   (state <s> #^superstate nil
               ^name format-conditions
              ^operator.name complete)
-->
(write (cmd |ctf -a startparsetime.txt stats|)) #has cpu time, WM size, number of chunks
}
sp {apply*parsingtime*capture-data
   (state <s> #^name learn-predicate
              ^operator.name finished-learning)
-->
(write (cmd |ctf -a endparsetime.txt stats|)) #has cpu time, WM size, number of chunks
}

###JAMES ctf parse breaks here
#sp {apply*startparsingtime*capture-data
#   (state <s> ^superstate nil
#              ^operator.name comprehension)
#-->
#(write (cmd |ctf -a startparsetime.txt stats|)) #has cpu time, WM size, number of chunks
#}
#sp {apply*parsingtime*capture-data
#   (state <s> ^name interaction
#              ^operator.name interpret-message)
#-->
#(write (cmd |ctf -a endparsetime.txt stats|)) #has cpu time, WM size, number of chunks
#}

sp {finished-game-teaching*apply*clean-up-after-learning
   (state <s> ^name finished-game-teaching
              ^operator <o>
              ^top-state <ts>
              ^top-state.interaction.status <status>
              ^top-state.interaction.changes <changes>)
   (<ts> ^dialog-context <dc>)
   (<o> ^name clean-up-after-learning)
-->
   (<changes> ^outgoing-message <msg>)
   (<msg> ^type simple-message
          ^message-type ok)
   (<status> ^performed.learning-event <de>)
   (<de> ^type game
         ^originator agent)
   (<ts> ^dialog-context <dc> -)
 }

sp {finished-game-teaching*apply*prepare-game
   (state <s> ^name finished-game-teaching
              ^operator <o>
              ^top-state.interaction.status <status>
              ^top-state.interaction.changes <changes>)
   (<o> ^name prepare-game)
-->
   (<changes> ^outgoing-message <msg>)
   (<msg> ^type simple-message
          ^message-type tell-me-go)
   (<status> ^performed.learning-event <de>)
   (<de> ^type game
         ^originator agent)
 }
