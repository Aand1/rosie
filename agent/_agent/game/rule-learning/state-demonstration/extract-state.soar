

sp {extract-state*propose*copy-relationships
   (state <s> ^name extract-state
             -^relationships.relations)
-->
   (<s> ^operator <o> + =)
   (<o> ^name copy-relationships
        ^category svs)
}
sp {extract-state*apply*copy-relationships
   (state <s> ^name extract-state
              ^relationships <rels>
              ^operator.name copy-relationships
              ^topstate.prepositions.<< prep2 prep >> <p>)
   (<p> ^name <name> ^pair <pair3>)
   (<pair3> ^a <ida> ^b <idb> -^c)
-->
   (<rels> ^relations <r>)
   (<r> ^name <name> ^pair <pair>)
   (<pair> ^a <ida> ^b <idb>)
}

sp {extract-state*apply*copy-relationships*3arg
   (state <s> ^name extract-state
              ^relationships <rels>
              ^operator.name copy-relationships
              ^topstate.prepositions.<< prep2 prep >> <p>)
   (<p> ^name <name> ^pair <pair3>)
   (<pair3> ^a <ida> ^b <idb> ^c <idc>)
-->
   (<rels> ^relations <r>)
   (<r> ^name <name> ^pair <pair>)
   (<pair> ^a <ida> ^b <idb> ^c <idc>)
}

sp {extract-state*propose*copy-objects
   (state <s> ^name extract-state
             -^object-set.object)
-->
   (<s> ^operator <o> + =)
   (<o> ^name copy-objects
        ^category svs)
}
sp {extract-state*apply*copy-objects
   (state <s> ^name extract-state
              ^relationships.relations <p>
              ^object-set <os>
              ^topstate.object <obj>
              ^operator.name copy-objects
              ^relationships <rels>)
   (<p> ^name <name> ^pair <pair>)
   (<pair> ^<< a b c >> <id>)
   (<obj> ^id <id>)
-->
   (<os> ^object <obj>)
}

sp {extract-state*propose*complete-state
   (state <s> ^name extract-state)
-->
   (<s> ^operator <o> + =)
   (<o> ^name complete-state
        ^category svs)
}

sp {extract-state*apply*complete-state
   (state <s> ^name extract-state
              ^object-set <os>
              ^relationships <rels>
              ^superstate.operator <op>
              ^operator.name complete-state)
-->
   (<op> ^state-result <res>)
   (<res> ^relationships <rels> ^objects <os>)
}