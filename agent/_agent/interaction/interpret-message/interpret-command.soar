###################################################################
#
# interpret-command
#   A command given by the instructor to the agent to do something
#   Construction: *-VP-T
#     E.g. 'Store the red sphere', 'Put the green large block in the pantry'
#
###################################################################

#######
# OPERATOR PROPOSAL
#######
sp {interpret-message*propose*interpret-action-command
   (state <s> ^name interpret-message
              ^instructor-message <msg>
              -^top-state.dialog-context
              -^new-segment-info)
   (<msg> ^message-type command)
-->
   (<s> ^operator <o> +)
   (<o> ^name interpret-action-command
        ^command-message <msg>)
}

#JK
sp {interpret-message*propose*interpret-conditional-predicate*command
   (state <s> ^name interpret-message
              ^instructor-message <msg>
              ^top-state.dialog-context.type game-learning)
   (<msg> ^message-type command
          -^action.handle attend
          -^action.handle ignore
          -^interpreted true)
-->
   (<s> ^operator <o> + =)
   (<o> ^name interpret-conditional-predicate
        ^message <msg>)
}

sp {interpret-message*propose*interpret-attend-list
   (state <s> ^name interpret-message
              ^instructor-message <msg>
              ^top-state.dialog-context <dc>)
   (<msg> ^message-type command
          ^action.handle attend
          -^interpreted true)
-->
   (<s> ^operator <o> + =)
   (<o> ^name interpret-attend-list
        ^message <msg>)
}

sp {interpret-message*propose*interpret-ignore-list
   (state <s> ^name interpret-message
              ^instructor-message <msg>
              ^top-state.dialog-context <dc>)
   (<msg> ^message-type command
          ^action.handle ignore
          -^interpreted true)
-->
   (<s> ^operator <o> + =)
   (<o> ^name interpret-ignore-list
        ^message <msg>)
}

sp {interpret-message*apply*interpret-action-command
   (state <s> ^name interpret-message
              ^instructor-message <msg>
              ^operator.name interpret-action-command)
   (<msg> ^action.handle <action-handle>)
-->
   (<s> ^new-segment-info <info>)
   (<info> ^purpose <p>
           ^originator instructor)
   (<p> ^type execute-action
        ^parameters.command-message <msg>
        ^satisfaction.action-event.type <action-handle>)
   (<msg> ^interpreted true)
}

sp {interpret-message*apply*interpret-action-command*pop-segment*existing-action
   (state <s> ^name interpret-message
              ^operator.name interpret-action-command
              ^top-state.interaction.stack.segment.purpose.type action)
-->
   (<s> ^terminate-segment true)
}