# Interaction ordering
# 1. status-type new-message
# 2. status-type failure
# 3. change-type outgoing-message
# 4. status-type performed-event
# 5. change-type clear-interaction-stack
# 6. change-type terminate-segment 
# 7. change-type modify-segment-info
# 8. change-type new-segment-info

# 1. new-message
sp {interaction*better-preferences*new-message
   (state <s> ^topstate <s>
              ^operator <o1> +
              ^operator <o2> +)
   (<o1> ^name interaction
         ^status-type new-message)
   (<o2> ^name interaction
         ^<type> << failure outgoing-message performed clear-interaction-stack terminate-segment modify-segment-info new-segment-info >> )
-->
   (<s> ^operator <o1> > <o2>)
}

# 2. failure
sp {interaction*better-preferences*failure
   (state <s> ^topstate <s>
              ^operator <o1> +
              ^operator <o2> +)
   (<o1> ^name interaction
         ^status-type failure)
   (<o2> ^name interaction
         ^<type> << outgoing-message performed clear-interaction-stack terminate-segment modify-segment-info new-segment-info >> )
-->
   (<s> ^operator <o1> > <o2>)
}

# 3. outgoing-message
sp {interaction*better-preferences*outgoing-message
   (state <s> ^topstate <s>
              ^operator <o1> +
              ^operator <o2> +)
   (<o1> ^name interaction
         ^change-type outgoing-message)
   (<o2> ^name interaction
         ^<type> << performed clear-interaction-stack terminate-segment modify-segment-info new-segment-info >> )
-->
   (<s> ^operator <o1> > <o2>)
}

# 4. performed
sp {interaction*better-preferences*performed
   (state <s> ^topstate <s>
              ^operator <o1> +
              ^operator <o2> +)
   (<o1> ^name interaction
         ^status-type performed)
   (<o2> ^name interaction
         ^<type> << clear-interaction-stack terminate-segment modify-segment-info new-segment-info >> )
-->
   (<s> ^operator <o1> > <o2>)
}

# 5. clear-interaction-stack
sp {interaction*better-preferences*clear-interaction-stack
   (state <s> ^topstate <s>
              ^operator <o1> +
              ^operator <o2> +)
   (<o1> ^name interaction
         ^change-type clear-interaction-stack)
   (<o2> ^name interaction
         ^<type> << terminate-segment new-segment-info modify-segment-info >> )
-->
   (<s> ^operator <o1> > <o2>)
}

# 6. terminate-segment
sp {interaction*better-preferences*clear-interaction-stack
   (state <s> ^topstate <s>
              ^operator <o1> +
              ^operator <o2> +)
   (<o1> ^name interaction
         ^change-type terminate-segment)
   (<o2> ^name interaction
         ^<type> << new-segment-info modify-segment-info >> )
-->
   (<s> ^operator <o1> > <o2>)
}

# 7. new-segment-info
sp {interaction*better-preferences*new-segment-info
   (state <s> ^topstate <s>
              ^operator <o1> +
              ^operator <o2> +)
   (<o1> ^name interaction
         ^change-type new-segment-info)
   (<o2> ^name interaction
         ^<type> << modify-segment-info >> )
-->
   (<s> ^operator <o1> > <o2>)
}

# 8. modify-segment-info