sp {go-to-waypoint*elaborate*desired*waypoint*superstate
   (state <s> ^name go-to-waypoint
              ^superstate.desired-waypoint <wp>)
-->
   (<s> ^desired.waypoint <wp>)
}

sp {go-to-waypoint*elaborate*current-action*from*superstate
   (state <s> ^name go-to-waypoint
              ^superstate.current-action <a>)
-->
   (<s> ^current-action <a>)
}

sp {go-to-waypoint*elaborate*current-waypoint*from*superstate*world
   (state <s> ^name go-to-waypoint
              ^superstate.world.robot.current-waypoint <wp>)
-->
   (<s> ^current-waypoint <wp>)
}

sp {go-to-waypoint*elaborate*distances
   (state <s> ^name go-to-waypoint)
-->
   (<s> ^distances <dists>)
}

sp {go-to-waypoint*elaborate*distance-to-waypoint
   (state <s> ^name go-to-waypoint
              ^top-state.maps.map <map>
              ^io.input-link.self.pose <pose>
              ^distances <dists>)
   (<map> ^handle bmap1
          ^waypoint <wp>)
   (<wp> ^handle <wp-handle>
         ^x <x> ^y <y>)
   (<pose> ^x <cx> ^y <cy>)
-->
   (<dists> ^<wp-handle> (sqrt (+ (* (- <cx> <x>) (- <cx> <x>)) (* (- <cy> <y>) (- <cy> <y>)))))
}