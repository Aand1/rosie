sp {comprehension*propose*comprehend-completion
   (state <s> ^name comprehension
              ^segment.comprehension-structure.processed true)
-->
   (<s> ^operator <op> + =)
   (<op> ^name comprehend-completion)
}
sp {apply*comprehend-completion*remove-comprehension-structure
   (state <s> ^operator.name comprehend-completion
              ^segment <seg>)
   (<seg> ^comprehension-structure <cs>)
-->
   (<seg>  ^comprehension-structure <cs> -)}

sp {apply*comprehend-completion*remove-comprehension-structure*receiver
   (state <s> ^operator.name comprehend-completion
              ^segment <seg>)
   (<seg> ^comprehension-structure.unfilled-receiver-item <item>)
-->
   (<seg> ^unfilled-receiver-item <item>
          ^receiver-list-item <item>)}

sp {apply*comprehend-completion*remove-comprehension-structure*assigner
   (state <s> ^operator.name comprehend-completion
              ^segment <seg>)
   (<seg> ^comprehension-structure.unfilled-assigner-item <item>)
-->
   (<seg> ^unfilled-assigner-item <item>)
}

sp {comprehension*compare*comprehend-completion*comprehend-construction
   (state <s> ^name comprehension
              ^operator <op1> +
                        <op2> +)
   (<op1> ^name comprehend-completion)
   (<op2> ^name comprehend-construction)
-->
   (<s> ^operator <op1> > <op2>)
}

#######################
sp {apply*comprehend-completion*remove-comprehension-structure*snip-receiver
   (state <s> ^operator.name comprehend-completion
              ^segment <seg>)
   (<seg> ^comprehension-structure.remove-receiver <rr>
          ^unfilled-receiver-item <rr>)
-->
   (<seg> ^unfilled-receiver-item <rr> -)
}

sp {apply*comprehend-completion*remove-comprehension-structure*snip-assigner
   (state <s> ^operator.name comprehend-completion
              ^segment <seg>)
   (<seg> ^comprehension-structure.remove-assigner <rr>
          ^unfilled-assigner-item <rr>)
-->
   (<seg> ^unfilled-assigner-item <rr> -)
}

########################

sp {apply*comprehend-completion*create-receiver-item*init-retrieved-stack
   (state <s> ^operator.name comprehend-completion
              ^segment <ss>)
   (<ss> ^comprehension-structure.unfilled-receiver-item <item>
        -^retrieved-stack <x>)
-->
   (<ss> ^retrieved-stack <stack>)
   (<stack> ^item <item>
            ^prior <prior>)
   (<prior> ^item |*|)}

sp {apply*comprehend-completion*create-receiver-item*push-retrieved-stack*noskip
   (state <s> ^operator.name comprehend-completion
              ^segment <ss>
              ^quiescence t)
   (<ss> ^comprehension-structure <cs>
         ^retrieved-stack <rc>)
   (<cs> ^unfilled-receiver-item <item>
        -^remove-receiver <rr>
         ^type word)
   (<rc> ^item { <rr> <> <item> })
-->
   (<ss> ^retrieved-stack <rc> -
                          <nrc>)
   (<nrc> ^item <item>
          ^prior <rc>)}


sp {apply*comprehend-completion*create-receiver-item*push-retrieved-stack*skip1*stale-receiver
   (state <s> ^operator.name comprehend-completion
              ^segment <ss>
              ^quiescence t)
   (<ss> ^comprehension-structure <cs>
         ^retrieved-stack <rc>)
   (<cs> ^unfilled-receiver-item <item>
         ^remove-receiver <rr>
        -^remove-receiver <rr2>
         ^type word)
   (<rc> ^item { <rr> <> <item> }
         ^prior <prior>)
   (<prior> ^item <rr2>)
-->
   (<ss> ^retrieved-stack <rc> -
                          <nrc>)
   (<nrc> ^item <item>
          ^prior <prior>)}


sp {apply*comprehend-completion*create-receiver-item*push-retrieved-stack*skip2*stale-receiver
   (state <s> ^operator.name comprehend-completion
              ^segment <ss>
              ^quiescence t)
   (<ss> ^comprehension-structure <cs>
         ^retrieved-stack <rc>)
   (<cs> ^unfilled-receiver-item <item>
         ^remove-receiver <rr> <rr2>
         ^type word)
   (<rc> ^item { <rr> <> <item> }
         ^prior <prior>)
   (<prior> ^item <rr2>
            ^prior <prior2>)
-->
   (<ss> ^retrieved-stack <rc> -
                          <nrc>)
   (<nrc> ^item <item>
          ^prior <prior2>)}
#
#sp {apply*comprehend-completion*create-receiver-item*push-retrieved-stack2
#   :interrupt
#   (state <s> ^operator.name comprehend-completion
#              ^name comprehend-construction   ## ??? Why do this in the substate ???
#              ^segment <ss>
#              ^quiescence t)
#   (<ss> ^comprehension-structure <cs>
#         ^retrieved-stack <rc>)
#   (<cs> ^unfilled-receiver-item <item>
#        -^type word)
#   (<rc> ^item { <> <item> <x> }
#         ^prior <p>)
#-->
#   (<rc> ^item <item>
#               <x> -
#         ^prior |*|
#                <p> -)}
#
