sp {learn-goal-defintion*propose*add-goal-predicate
   (state <s> ^name learn-goal-definition
              ^goal-structure <goal>
              ^goal-predicate-info <info>)
   (<info> -^smem-predicate
            ^predicate.predicate-id <id>)
-->
   (<s> ^operator <o> + =)
   (<o> ^name add-goal-predicate
        ^goal-predicate-info <info>)
}

sp {learn-goal-definition*apply*add-goal-predicate*matches
   (state <s> ^name learn-goal-definition
              ^operator <o>
              ^goal-structure <goal>)
   (<o> ^name add-goal-predicate
        ^goal-predicate-info <info>)
   (<info> ^predicate <pred>
           ^matches <pred-slot>)
   (<pred> ^type <pred-type>)
-->
   (<goal> ^predicate <new-pred>)
   (<new-pred> ^id <pred-slot>
               ^type <pred-type>)
   (<info> ^smem-predicate <new-pred>)
   (<s> ^created-lti <new-pred>)
}

sp {learn-goal-definition*apply*add-goal-predicate*no*matches
   (state <s> ^name learn-goal-definition
              ^operator <o>
              ^goal-structure <goal>)
   (<o> ^name add-goal-predicate
        ^goal-predicate-info <info>)
   (<info> ^predicate <pred>
           -^matches <proc-id>)
   (<pred> ^predicate-id <pred-id>
           ^type <pred-type>)
-->
   (<goal> ^predicate <new-pred>)
   (<new-pred> ^id <new-pred-slot>
               ^type <pred-type>)
   (<new-pred-slot> ^default <pred-id>)
   (<info> ^smem-predicate <new-pred>)
   (<s> ^created-lti <new-pred>)
}