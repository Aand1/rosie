# Update world.robot.moving-state

sp {anystate*apply*attend-to-scene-change*different-moving-state
   (state <s> ^operator <o>
              ^topstate.world.robot <robot>)
   (<o> ^name attend-to-scene-change
        ^change.type different-moving-state
        ^change.self-info.moving-state <new-state>)
   (<robot> ^moving-state { <old-state> <> <new-state> })
-->
   (<robot> ^moving-state <old-state> -
            ^moving-state <new-state>)
}

sp {anystate*apply*attend-to-scene-change*monitor*moving-state
   (state <s> ^operator <o>
              ^topstate.agent-params.debug-mode on
              ^topstate.world.robot <robot>)
   (<o> ^name attend-to-scene-change
        ^change.type different-moving-state
        ^change.self-info.moving-state <new-state>)
   (<robot> ^moving-state { <old-state> <> <new-state> })
-->
   (write |robot.moving-state changed from | <old-state> | to | <new-state> (crlf))
}