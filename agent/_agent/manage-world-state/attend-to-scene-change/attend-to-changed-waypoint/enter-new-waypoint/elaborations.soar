sp {enter-new-waypoint*elaborate*new-waypoint*superstate
   (state <s> ^name enter-new-waypoint
              ^superstate.operator.new-waypoint <wp>)
-->
   (<s> ^new-waypoint <wp>)
}

sp {enter-new-waypoint*elaborate*new-location
   (state <s> ^name enter-new-waypoint
              ^new-waypoint.handle <wp-handle>
              ^top-state.world.objects.object <loc>)
   (<loc> ^waypoint <wp-handle>)
-->
   (<s> ^new-location <loc>)
}

sp {enter-new-waypoint*elaborate*new-location*none
   (state <s> ^name enter-new-waypoint
              ^new-waypoint.handle <wp-handle>
              -^top-state.world.objects.object.waypoint <wp-handle>)
-->
   (<s> ^new-location none)
}

#sp {attend-to-changed-waypont*elaborate*smem-query-cue*location
#   (state <s> ^name enter-new-waypoint
#              ^new-waypoint-handle <wp-handle>)
#-->
#   (<s> ^smem-query <q>)
#   (<q> ^cue <cue>
#        ^depth 3)
#   (<cue> ^waypoint <wp-handle>)
#}
#
#sp {enter-new-waypoint*elaborate*current-location*none
#   (state <s> ^name enter-new-waypoint
#              ^smem-query.result failure)
#-->
#   (<s> ^new-location none)
#}

#sp {enter-new-waypoint*elaborate*current-location*success
#   (state <s> ^name enter-new-waypoint
#              ^smem-query.result { <loc-lti> <> failure })
#-->
#   (<s> ^new-location <loc-lti>)
#}
