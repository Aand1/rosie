# Updating world.robot.current-waypoint
sp {anystate*apply*attend-to-scene-change*changed-robot-status*add*new
   (state <s> ^operator <o>
              ^io.input-link.self.moving-state <cur-state>
              ^top-state.world.robot <robot>)
   (<o> ^name attend-to-scene-change
        ^change.type changed-robot-status)
-->
   (<robot> ^moving-state <cur-state>)
}
   
sp {anystate*apply*attend-to-scene-change*changed-robot-status*remove*old
   (state <s> ^operator <o>
              ^io.input-link.self.moving-state <cur-state>
              ^top-state.world.robot <robot>)
   (<o> ^name attend-to-scene-change
        ^change.type changed-robot-status)
   (<robot> ^moving-state { <old-state> <> <cur-state> })
-->
   (<robot> ^moving-state <old-state> -)
}

sp {anystate*apply*attend-to-scene-change*monitor*changed-robot-status
   (state <s> ^operator <o>
              ^top-state.agent-params.debug-mode on
              ^io.input-link.self.moving-state <state>)
   (<o> ^name attend-to-scene-change
        ^change.type changed-robot-status)
-->
   #(write |Robot moving-state: | <state> (crlf))
}