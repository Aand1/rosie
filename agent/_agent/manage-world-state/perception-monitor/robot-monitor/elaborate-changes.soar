sp {top-state*elaborate*scene-changes*change-info*arm*changes
   (state <s> ^top-state <s>
              ^scene-monitor.scene-changes.change-info <info>)
-->
   (<info> ^change <arm-status-change>)
   (<arm-status-change> ^name arm-status-change
                        ^op-name attend-to-arm)
}

#########################################################
# Change: different-arm-action
#   Occurs when the arm action of the robot changes
#########################################################

sp {monitor-scene-changes*elaborate*scene-change*different-arm-action
   (state <s> ^top-state <s>
              ^scene-monitor.scene-changes <sc>
              ^io.input-link.self <self>
              ^world.robot.arm <arm>)
   (<self> ^action <cur-action>)
   (<arm> -^action <cur-action>)
-->
   (<sc> ^change <change>)
   (<change> ^type arm-status-change
             ^self-info <self>)
}

##########################################################
## Change: grabbed-object
##   Occurs when the arm reports grabbing an object
##########################################################
#
#sp {monitor-scene-changes*elaborate*scene-change*grabbed-object
#   (state <s> ^top-state <s>
#              ^world.robot.arm <arm>
#              ^scene-monitor.scene-changes <sc>
#              ^io.input-link.self <self>)
#   (<self> ^grabbed-object <id>)
#   (<arm> -^grabbed
#           ^moving <obj>)
#-->
#   (<sc> ^change <change>)
#   (<change> ^type arm-status-change
#             ^self-info <info>)
#}
#
##########################################################
## Change: released-object
##   Occurs when the arm reports released an object
##########################################################
#
#sp {monitor-scene-changes*elaborate*scene-change*released-object
#   (state <s> ^top-state <s>
#              ^world.robot.arm <arm>
#              ^scene-monitor.scene-changes <sc>
#              ^io.input-link.self <self>)
#   (<arm> ^grabbed <obj>)
#   (<self> ^grabbed-object -1)
#-->
#   (<sc> ^change <change>)
#   (<change> ^type arm-status-change
#             ^self-info <self>)
#}

#########################################################
# Change: different-moving-state
#   Occurs when io.input-link.self.moving-state changes
#########################################################

sp {monitor-scene-changes*elaborate*scene-change*released-object
   (state <s> ^top-state <s>
              ^world.robot.moving-state <cur-state>
              ^scene-monitor.scene-changes <sc>
              ^io.input-link.self <self>)
   (<self> ^moving-state { <new-state> <> <cur-state> })
-->
   (<sc> ^change <change>)
   (<change> ^type different-moving-state
             ^self-info <self>)
}

########################################################
# Change: new-waypoint
########################################################

sp {monitor-scene-changes*elaborate*scene-change*new-waypoint
   (state <s> ^top-state <s>
              ^world.robot <robot>
              ^io.input-link.self.current-waypoint.id <wp-id>
              ^scene-monitor.scene-changes <sc>)
   (<robot> -^current-waypoint.id <wp-id>)
-->
   (<sc> ^change <change>)
   (<change> ^type new-waypoint
             ^waypoint-id <wp-id>)
}