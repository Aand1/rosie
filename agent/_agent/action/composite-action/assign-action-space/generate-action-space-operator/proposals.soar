### retrieve all executed intances of this operator definition
# sp {generate-action-space-operator*propose*retrieve*episodes
#    (state <s> ^name generate-action-space-operator
#    	      ^operator-template <pid>
# 	      ^superstate.superstate.map-id.procedural <p2id>
# 	      -^retrieved-all-instances true)
# -->
#    (<s> ^operator <op> +)
#    (<op> ^name retrieve-example-instances
#    	 ^operator-template <pid>
# 	 ^superstate-operator-template <p2id>)
# }


sp {propose*get-goal-defintion
   (state <s> ^name generate-action-space-operator
   	      ^map-id.goal <gid>)
#	      ^retrieved-all-instances true)
-->
   (<s> ^operator <op> +)
   (<op> ^name get-goal-definition
   	 ^goal-id <gid>)
}

sp {propose*complete-generate-action-space-operator
   (state <s> ^name generate-action-space-operator)
-->
   (<s> ^operator <op> + <)
   (<op> ^name complete-generate-action-space-operator)
}


sp {prefer*retrievals*before*other*operators
   (state <s> ^name generate-action-space-operator
   	      ^operator <op1> +
	      ^operator <op2> +)
   (<op1> ^name << retrieve-example-instances get-goal-definition >>)
   (<op2> ^name << smem-retrieve-new smem-query >>)
-->
   (<s> ^operator <op2> > <op1>)
}