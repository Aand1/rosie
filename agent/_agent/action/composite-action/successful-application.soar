### propose successful completion if the desired state is reached
# sp {composite-action*mark*applied
#    :interrupt
#    (state <s> ^problemspace <ps>
# 	      ^desired <d>
# 	      ^success <d>
# 	      ^superstate <ss>
# 	      ^quiescence t)
#    (<ps> ^action.category composite)
#    (<ss> ^operator <ia>
#    	 ^superstate <sss>
# 	 ^name learn-proposal-rule)
#    (<sss> ^topstate-indexed-action <map-op>)
# -->
#    (<map-op> ^applied yes)
# }

sp {composite-action*mark*applied*topstate
   :interrupt
   (state <s> ^problemspace <ps>    
   	      ^indexed-action <ia>
	      ^quiescence t
	      ^name action
	      ^superstate-indexed-action <map-op>)
   (<ia> ^desired <d>
	 ^success <d>)
-->
   (<map-op> ^applied yes)
}


############## learning proposal rules for composite actions ###############
sp {composite-action*mark*applied*topstate*learn-proposal-rule
   (state <s> ^problemspace <ps>
	      ^desired <d>
	      ^success <d>
	      ^superstate <ss>
	      ^action-executed true)
   (<ss> ^superstate-indexed-action <ia>
   	 ^name learn-proposal-rule
	 ^superstate <sss>)
-->
   (<sss> ^operator <ia> +)
}