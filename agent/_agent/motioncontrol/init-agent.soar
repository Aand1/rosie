sp {topstate*propose*init-agent
   (state <s> -^name
   	      ^superstate nil)
-->
   (<s> ^operator <op> + >)
   (<op> ^name init-agent)
}

sp {topstate*apply*init-agent
	(state <s> ^operator <op>)
    (<op> ^name init-agent)
-->
	(<s> ^topstate <s>
      	 ^name motion-control)
}

### Just for demoing
sp {topstate*propose*first-grab
	(state <s> ^name motion-control
           	  -^first-grab-requested
              -^request)
-->
	(<s> ^operator.name first-grab +=)
}

sp {topstate*apply*first-grab
	(state <s> ^name motion-control
               ^operator.name first-grab)
-->
	(<s> ^request <r>
      	 ^first-grab-requested true)
	(<r> ^target <t>
         ^step-size 0.6)
 	(<t> ^x 1
         ^y 0.0
         ^z 0.0)
}

sp {topstate*propose*first-drop
	(state <s> ^name motion-control
           	   ^first-grab-requested
              -^first-drop-requested
              -^request)
-->
	(<s> ^operator.name first-drop +=)
}

sp {topstate*apply*first-drop
	(state <s> ^name motion-control
               ^operator.name first-drop)
-->
	(<s> ^request <r>
      	 ^first-drop-requested true)
	(<r> ^target <t>
         ^step-size 0.6)
 	(<t> ^x 0.2
         ^y 0.2
         ^z 0.1)
}


#sp {propose*pause-test
#	(state <s> ^name interpret-motion-request
#               ^topstate.io.output-link <ol>)
# 	(<ol> ^search <srch>)
#  	(<srch> ^status requested)
#    (<ol> -^pause <ps>)
#    (<s> -^pause demoed)
#-->
#	(<s> ^operator <op> + >)
# 	(<op> ^name pause-test)
#}
#
#sp {apply*pause-test
#	(state <s> ^name interpret-motion-request
#               ^operator.name pause-test
#               ^topstate.io.output-link <ol>)
# 	(<ol> ^search <srch>)
#  	(<srch> ^status requested)
#-->
#	(<ol> ^pause <p>)
# 	(<p> ^info null)
#  	(<s> ^pause demoed)
#}
#
#sp {propose*continue-test
#	(state <s> ^name interpret-motion-request
#               ^topstate.io.output-link <ol>)
# 	(<ol> ^pause <ps>)
#  	(<ps> ^status finished)
#-->
#	(<s> ^operator <op> + >)
# 	(<op> ^name continue-test)
#}
#
#sp {apply*continue-test
#	(state <s> ^name interpret-motion-request
#               ^operator.name continue-test
#               ^topstate.io.output-link <ol>)
# 	(<ol> ^pause <ps>)
#-->
#	(<ol> ^continue <p>
#          ^pause <ps> -)
# 	(<p> ^info null)
#}