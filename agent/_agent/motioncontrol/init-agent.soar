sp {topstate*propose*init-agent
   (state <s> -^name
   	      ^superstate nil)
-->
   (<s> ^operator <op> + >)
   (<op> ^name init-agent)
}

sp {topstate*apply*init-agent
	(state <s> ^operator <op>)
    (<op> ^name init-agent)
-->
	(<s> ^topstate <s>
      	 ^name motion-control)
}

### Just for demoing
sp {topstate*start*demo
	(state <s> ^name motion-control
           	   ^io.output-link <ol>)
-->
	(<s> ^request <r>)
	(<r> ^target <t>
        ^step-size 0.6)
 	(<t> ^x 0.2
         ^y 0.0
         ^z 0.2)
}

sp {propose*pause-test
	(state <s> ^name interpret-motion-request
               ^topstate.io.output-link <ol>)
 	(<ol> ^search <srch>)
  	(<srch> ^status requested)
    (<ol> -^pause <ps>)
    (<s> -^pause demoed)
-->
	(<s> ^operator <op> + >)
 	(<op> ^name pause-test)
}

sp {apply*pause-test
	(state <s> ^name interpret-motion-request
               ^operator.name pause-test
               ^topstate.io.output-link <ol>)
 	(<ol> ^search <srch>)
  	(<srch> ^status requested)
-->
	(<ol> ^pause <p>)
 	(<p> ^info null)
  	(<s> ^pause demoed)
}

sp {propose*continue-test
	(state <s> ^name interpret-motion-request
               ^topstate.io.output-link <ol>)
 	(<ol> ^pause <ps>)
  	(<ps> ^status finished)
-->
	(<s> ^operator <op> + >)
 	(<op> ^name continue-test)
}

sp {apply*continue-test
	(state <s> ^name interpret-motion-request
               ^operator.name continue-test
               ^topstate.io.output-link <ol>)
 	(<ol> ^pause <ps>)
-->
	(<ol> ^continue <p>
          ^pause <ps> -)
 	(<p> ^info null)
}