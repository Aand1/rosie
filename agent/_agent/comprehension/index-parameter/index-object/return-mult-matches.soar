#################################################
#
# return-mult-matches
#   Multiple objects have matched, return all, use interaction, 
#
##################################################

sp {index-object*propose*return-mult-matches
   (state <s> ^name index-object
              ^object-to-index.matches <m>)
   (<m> ^finished true
        ^mult-matches true
        ^match <obj>)
-->
   (<s> ^operator <o> + =)
   (<o> ^name return-mult-matches
        ^match <obj>)
}


##################################################
#
# return-all = True
#   Returns all matches to object
#
##################################################

sp {index-object*apply*return-mult-matches*return-all*true
   (state <s> ^name index-object
              ^operator.name return-mult-matches
              ^object-to-index.object <obj>
              ^object-to-index.matches.match <m>
              ^index-info.return-all true)
-->
   (<obj> ^result <m>)
}


##################################################
# 
# return-all = False and use-interaction False
#   Returns one at random
#
##################################################

sp {index-object*apply*return-mult-matches*return-random
   (state <s> ^name index-object
              ^operator <o>
              ^object-to-index.object <obj>
              ^object-to-index.matches.match <m>
              ^index-info.return-all false
              ^index-info.use-interaction false)
   (<o> ^name return-mult-matches
        ^match <m>)
-->
   (<obj> ^result <m>)
}

##################################################
# 
# return-all = False and use-interaction True
#   Ask a which question
#
##################################################

sp {index-object*apply*return-mult-matches*report*index-object-tie
   (state <s> ^name index-object
              ^operator.name return-mult-matches
              ^index-info.return-all false
              ^index-info.use-interaction true
              ^object-to-index.object <obj>
              ^topstate.interaction.status <status>)
-->
   (<status> ^failure <f>)
   (<f> ^type index-object-tie
        ^target-object <obj>)
}
