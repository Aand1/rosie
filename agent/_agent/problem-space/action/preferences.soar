# If an operator isn't matched, reject it
sp {action*reject*non-matched*operators
   (state <s> ^problem-space.name action
              ^operator <o> +
              ^match-action <ma>)
   (<ma> -^matched <o>)
-->
   (<s> ^operator <o> -)
}

# If an operator is matched, best preference
sp {action*best*preference*evaluate-operator*matched
   (state <s> ^problem-space.name action
              ^match-action.matched <eval-op>
              ^operator <o> +)
   (<o> ^name evaluate-operator
        ^superoperator <eval-op>)
-->
   (<s> ^operator <o> >)
}

# If it is a subaction, give it a best preference
sp {action*subaction*best*preference
   (state <s> ^problem-space.name action
             -^problem-space.learning.type retrospective
              ^operator <o> +)
   (<o> ^subaction-handle <sub-handle>
        ^perform once)
-->
   (<s> ^operator <o> > =)
}