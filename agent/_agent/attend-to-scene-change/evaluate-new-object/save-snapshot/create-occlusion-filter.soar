sp {save-snapshop*propose*create-occlusion-filter
   (state <s> ^name save-snapshot
              ^svs-object.id <id>
             -^occlusion-amount)
-->
   (<s> ^operator <o> + =)
   (<o> ^name create-occlusion-filter
        ^category perception
        ^object-id <id>)
}

sp {save-snapshot*apply*create-occlusion-filter
   (state <s> ^name save-snapshot
              ^operator <o>
              ^svs.command <cmd>)
   (<o> ^name create-occlusion-filter
        ^object-id <id>)
-->
   (<cmd> ^extract_once <occlusion>)
   (<occlusion> ^type occlusion
                ^a <node>)
   (<node> ^type node
           ^id <id>)
   (<s> ^occlusion-filter <occlusion>)
}

sp {save-snapshot*apply*create-occlusion-filter*copy*result
   (state <s> ^name save-snapshot
              ^operator.name create-occlusion-filter
              ^occlusion-filter.result.record.value <val>)
-->
   (<s> ^occlusion-amount <val>)
}

sp {save-snapshot*apply*create-occlusion-filter*clear*command
   (state <s> ^name save-snapshot
              ^operator.name create-occlusion-filter
              ^occlusion-filter <occlusion>
              ^svs.command <cmd>)
   (<occlusion> ^result <res>)
   (<cmd> ^extract_once <occlusion>)
-->
   (<cmd> ^extract_once <occlusion> -)
}


