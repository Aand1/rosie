# elaborate dx, dy
sp {selection*elaborate*evaluation*dx*dy
   (state <s> ^name selection
              ^evaluation <e>
              ^superstate.desired.location <dloc>
             -^top-state.current-location <cloc>)
   (<e> ^current-location <cloc>)
   (<cloc> ^x <cx> ^y <cy>)
   (<dloc> ^x <dx> ^y <dy>)
-->
   (<e> ^dx (- <dx> <cx>)
        ^dy (- <dy> <cy>))
}

# elaborate estimated-cost

# Not at desired location
sp {selection*elaborate*evaluation*estimated-cost
   :default
   (state <s> ^name selection
              ^evaluation <e>
             -^top-state.current-location <cloc>
              ^superstate.desired.location <dloc>)
   (<e> ^current-location <cloc>
       -^updated-estimate true  ## JEL 2/11/
        ^dx <dx>
        ^dy <dy>)
   (<cloc> ^id <cid>)
   (<dloc> ^id { <did> <> <cid> })
-->
   # Pythagorean Theorem
   (<e> ^estimated-cost (sqrt (+ (* <dx> <dx>) (* <dy> <dy>))))
}

# At desired location
#sp {selection*elaborate*evaluation*estimated-cost*at*desired
#   :default
#   (state <s> ^name selection
#              ^evaluation <e>
#             -^top-state.current-location <cloc>
#              ^superstate.desired.location.id <did>)
#   (<e> ^current-location <cloc>
#       -^updated-estimate true)  ## JEL 2/11/
#   (<cloc> ^id <did>)
#-->
#   (<e> ^estimated-cost 0)
#}

# elaborate: total-estimated-cost
sp {selection*elaborate*evaluation*total-estimated-cost
   :default
   (state <s> ^name selection
              ^evaluation <e>)
   (<e> ^estimated-cost <ec>
        ^path-cost <pc>)
-->
   (<e> ^total-estimated-cost (+  <ec> <pc>))
}

# print out info about path costs
sp {selection*monitor*write*path*costs
   :default
   (state <s> ^name selection
              ^evaluation <e>
              ^superstate.desired.location.id <des-id>)
   (<e> ^estimated-cost <ec>
        ^path-cost <pc>
        ^current-location.id <cur-id>)
-->
#   (write (crlf) |Estimated Cost from | <cur-id> | to | <des-id> |: | <ec>)
#   (write (crlf) |Path Cost at | <cur-id> |: | <pc>)
#   (write (crlf) |Total Estmated Cost: | <e> | | (+  <ec> <pc>) | : | <e> | path: | <pc> | Estimated Cost: | <ec> )
}
